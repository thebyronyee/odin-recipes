YUI.add("footer-full-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.footerHelper=new e.FooterHelper(this.appContext,{}),this.appStateParams=t,this.certificationLogos={onePercForThePlanet:{svg:"one-perc-for-the-planet",url:"https://www.onepercentfortheplanet.org/",width:"53px",height:"22px"},greatPlaceToWork:{svg:"great-place-to-work-mono",url:"https://www.greatplacetowork.com/certified-company/7051750",width:"19px",height:"32px"},climateNeutral:{svg:"climate-neutral-mono",url:"https://www.climateneutral.org/brand/flickr",width:"50px",height:"24px"},conservationAlliance:{svg:"conservation-alliance-mono",url:"https://www.conservationalliance.com/",width:"60px",height:"22px"},certifiedEvergreen:{svg:"certified-evergreen-mono",url:"https://www.tugboatinstitute.com/certified-evergreen/",width:"30px",height:"32px"}},this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),(t=this.footerHelper.getTemplateParams()).isSOHP=this.appStateParams.isSOHP,YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,t.requiresCookieConsent=!0,this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")&&(t.requiresCookieConsent=this.appContext.requiresCookieConsent),t.certificationLogos=this.certificationLogos,this.setContainerWithTemplate("footer-full",t),this},activate:function(){var t,n=this,i=this.get("container");return this.registerEventHandler(i.delegate("click",(function(e){t=e.target.ancestor(".lang-switcher",!0),e.preventDefault(),n.footerHelper.createDropAround(t,n)}),".lang-switcher")),this.footNode=i.one(".foot"),this.bannerContainer=i.one(".foot-banner-container"),this.isBannerFixed=!1,this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.updatePositioning.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.updatePositioning.bind(this))),this.registerEventHandler(this.appContext.bannerManager.on("renderBanner",(function(e){var t,i,r;if("footer"===e.placement)return i=(t=e.bannerView).get("container"),(r=n.bannerContainer).empty(),r.appendChild(i),t.on("subviewActivated",(function(){n.get("isCSSLoaded")&&n.updatePositioning()})),t.on("dismissed",(function(){t.get("container").remove(),t.destroy(),n.get("isCSSLoaded")&&n.updatePositioning()})),n.appContext.trustarcConsentManager&&(n.trustarcReadyListener=n.appContext.trustarcConsentManager.onReady((()=>{n.placeTrustArcBanner(r)})),n.trustarcReadyListener&&n.registerEventHandler(n.trustarcReadyListener)),t.normalizedActivate()}))),this.onCSSLoaded(this.updatePositioning),this.registerEventHandler(e.on("globalNav:navDrawerClosed",(function(){n.bannerContainer&&n.bannerContainer.removeClass("mobileDrawerOpen")}))),this.registerEventHandler(e.on("globalNav:navDrawerOpen",(function(){n.bannerContainer&&n.bannerContainer.addClass("mobileDrawerOpen")}))),this.registerEventHandler(i.delegate("click",(function(t){t.preventDefault(),e.ReportAbuseHelper.showReportModal(n.appContext)}),".footer-report-item")),this.appContext.trustarcConsentManager&&this.registerEventHandler(this.appContext.trustarcConsentManager.on("reopen",(()=>{this.placeTrustArcBanner(this.bannerContainer)}))),this},updateBannerPosition:function(t){var n=e.config.win.scrollY+e.config.win.innerHeight,i=this.footNode.getY();this.isBannerFixed&&n>=i?(this.bannerContainer.removeClass("fixed"),this.isBannerFixed=!1,this.appContext.adManager.infolinksActiveOnPage()&&this.appContext.adManager.clearInfolinksUnitReposition()):!this.isBannerFixed&&n<i&&(this.bannerContainer.addClass("fixed"),this.isBannerFixed=!0,this.appContext.adManager.infolinksActiveOnPage()&&(e.one("#consent_blackbar")?this.appContext.adManager.repositionInfolinksUnit("#consent_blackbar"):this.appContext.adManager.repositionInfolinksUnit(".cookie-banner-view")))},updateBottomPadding:function(t){this.footerHeight=this.footNode.get("clientHeight"),e.one("#content").setStyle("padding-bottom",this.footerHeight+this.bannerContainer.get("clientHeight")-1)},updatePositioning:function(){this.updateBannerPosition(),this.updateBottomPadding(),e.fire("footerFull:positionUpdated")},placeTrustArcBanner:function(t){var n=e.one("#consent_blackbar");n&&t.appendChild(n)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","url-helper","report-abuse-helper","fluid-droparound-view","footer-helper","url","flag-modal-view","fluid-modal-view","hermes-template-flag-photo-dialog-content"],langBundles:["common","policy-terms","welcome"]});YUI.add("hermes-lang-policy-terms",(function(e,l){e.Intl.add("hermes/policy-terms","en-US",{DOWNLOAD_TERMS_OF_SERVICE:[{type:0,value:"Download Terms of Service"}],DOWNLOAD_PRIVACY_POLICY:[{type:0,value:"Download Privacy Policy"}],DOWNLOAD_API_TERMS:[{type:0,value:"Download API Terms of Service"}],DOWNLOAD_COMMUNITY_GUIDELINES:[{type:0,value:"Download Community Guidelines"}],DOWNLOAD_COOKIE_POLICY:[{type:0,value:"Download Cookie Policy"}],DOWNLOAD_DATA_PROCESSING_POLICY:[{type:0,value:"Download Data Processing Policy"}],POLICIES_AND_GUIDELINES:[{type:0,value:"Policies & Guidelines"}],TERMS:[{type:0,value:"Terms"}],PRIVACY:[{type:0,value:"Privacy"}],API:[{type:0,value:"API"}],COMMUNITY:[{type:0,value:"Community"}],COOKIES:[{type:0,value:"Cookies"}],DATA_PROCESSING:[{type:0,value:"Data Processing"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("album-page-view",(function(e,t){var i=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.albumId=t.albumId,this.isOwner=t.isOwner,this.isTwitterbot=t.isTwitterbot,this.albumPhotoListLayoutStyle=t.albumPhotoListLayoutStyle,t.id=t.albumId,t.modelRegistryName="set-models",t.maxNumAttrName="totalCount",this.pageParams=t.pageParams,t.photoListConfig={modelParams:{registryName:"set-models",modelIdOrAttributes:t.albumId,collectionAttributeName:"photoPageList"},parentName:this.name,pageParams:t.pageParams,contextSuffix:"album-"+t.albumId,measureAFT:!0,maintainScrollPosition:!1,scrollToWithId:t.withPhotoId},this.photoCardHelper=new e.PhotoCardHelper(this.appContext),this.cardSubviewMapping={"photo-models":{name:"photo-card-view",isPhotoCard:!0,params:{showInfoBar:!0,showInfoBarTitle:!0,photoConfig:{shouldContain:!1,urlContext:"",isLargePaddedPhoto:!1,canRemovePhoto:this.isOwner}}}},t.photoListConfig.layout={targetRowHeight:"justified"===this.albumPhotoListLayoutStyle?280:500,targetRowHeightTolerance:.2,awakeBoundsToViewportSizeRatio:5,containerPadding:{top:0,right:0,bottom:8,left:0},itemSpacing:{horizontal:32,vertical:32},additionalHeight:this.photoCardHelper.INFO_BAR_HEIGHT},t.photoListConfig.subviewMapping={...this.cardSubviewMapping},t.photoListConfig.isCardLayout=!0,t.photoListConfig.resizeThrottle=200,this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"album-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-header-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-action-bar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"pagination-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,disabled:function(){return!this.pageParams.viewPageSize}},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var e=this;return this.appContext.getModel("set-models",this.albumId).then((function(t){e.set("albumModel",t)}))},buildContainer:function(){return this.setContainerWithTemplate("album-page"),this},buildHeadContainer:function(){var t,a,o,l=this.get("albumModel");l.registry?t=l.registry.getSizeToFit(this.albumId,{width:640,height:640}):i.error("Missing album model registry"),o=l.getValue("url").replace(/\/albums\/([0-9]+)/i,"/sets/$1"),a=this.templates("dynamic-page-head")({title:l.getValue("title"),description:l.getValue("description")||this.intlMessage({intlName:"album-page.OPENGRAPH_DESCRIPTION",owner:l.getValue("owner").getValue("displayname")}),url:l.getValue("url"),embedUrl:"/photosets/"+l.getValue("id"),fullURL:e.url(o),openGraphImageURL:t?e.URLHelper.addProtocolToURL(t.url):"",openGraphImageWidth:t?t.width:"",openGraphImageHeight:t?t.height:"",ownerURL:e.url(l.getValue("owner").getValue("url")),twitterCardType:"player",ogType:"article",domain:e.url(),feeds:[{title:this.intlMessage({intlName:"meta.ALBUM_ATOM_TITLE",username:l.getValue("owner").getValue("displayname"),albumTitle:l.getValue("title")}),url:"/services/feeds/photoset.gne?nsid="+l.getValue("owner").getValue("nsid")+"&set="+l.getValue("id")+"&lang="+this.appContext.lang.toLowerCase()+"&format=atom"}]}),a+=this.templates("head-article")({title:l.getValue("title"),url:e.url(o),ownerUrl:e.url(l.getValue("owner").getValue("url")),ownerName:l.getValue("owner").getValue("displayname"),photoUrl:t?e.URLHelper.addProtocolToURL(t.url):"",photoHeight:t?t.height:"",photoWidth:t?t.width:"",description:l.getValue("description")||this.intlMessage({intlName:"album-page.OPENGRAPH_DESCRIPTION",owner:l.getValue("owner").getValue("displayname")})}),a+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noarchive"}),a+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1"}),a+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noarchive"}),YUI.Env.isServer?this.set("headContainer",a):(this.set("headContainer",a.concat(this.subviews["pagination-view"].get("headContainer"))),this.updateHead())},activate:function(){var t=this.get("albumModel"),i=t.getValue("isOwner");return e.later(100,this,(function(){e.use("photo-page-scrappy-view")})),e.on("albumToolbarView:layoutChange",(e=>{var t=this.subviews["photo-list-view"],i=t.photoListLayout;i.targetRowHeight="justified"===e?280:500,i.fullWidthBreakoutRowCadence="justified"===e?null:3,t.setItems(this.get("albumModel").getValue("photoPageList").getList())})),e.on("albumEdit:primaryPhotoIsNewToAlbum",(()=>{this.refreshPhotoList()})),i||this.appContext.getViewCounter().recordAlbumView({albumOwnerID:t.getValue("owner").getValue("id"),albumID:t.getValue("id"),referrer:this.appContext.getReferrer()}),this.appContext.flipper.isFlipped("enable-photolist-scroll-history-with-url")||this.registerEventHandler(this.appContext.flapp.before("navigate",function(e){var t=e.details[0].url;if(t){var i=window.location.href,a=i.indexOf("/page"),o=-1!==(a=-1===a?i.indexOf("/with"):a)?i.substring(0,a):i,l=t.split("/"),r=l.indexOf("photos")+2,s=r<l.length?l[r]:null,n=s.match(/[0-9]+/);s&&n&&n[0].length===s.length&&history.replaceState(history.state,null,`${o}/with/${s}`)}}.bind(this))),this},onSubviewEvent:function(e,t){if(t&&"newPhotoAddedToAlbum"===t[0])this.subviews["photo-list-view"].resetToFirstPage();else if(t&&"handleRemovePhoto"===t[0]){var i=t[1];this.handleRemovePhoto(i)}},getAdditionalSpContexts:function(){var t={id:this.get("albumModel").getValue("id"),photoIds:[]};return e.Snowplough.getAlbumContext(t)},handleRemovePhoto:function(t){let i=new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"album-page.REMOVE_PHOTO_TITLE"}),htmlMessage:this.intlMessage({intlName:"album-page.REMOVE_PHOTO_MESSAGE"}),showCloseXButton:!1,fireModalActionClick:!1,onConfirm:async e=>{i.setLoading(!0);var o=this.get("albumModel");let l=o.getValue("owner");return o.removePhotoRemote(t).then((()=>{a.close();this.get("albumModel").exists()?this.refreshPhotoList():this.appContext.flapp.navigate(`${l.getValue("url")}albums`)}))}}),a=new e.Views.FluidModal({appContext:this.appContext,subview:i,hasSubviewConfigRefactor:!0}).show()},refreshPhotoList:function(){this.subviews["photo-list-view"].setItems(this.get("albumModel").getValue("photoPageList").getList())}})}),"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","set-models","hermes-template-album-page","hermes-template-dynamic-page-head","hermes-template-head-meta","hermes-template-head-link","hermes-template-head-article","album-toolbar-view","album-header-view","album-action-bar-view","photo-card-helper","photo-list-view","footer-full-view","url-helper","url"],optionalRequires:["hermes-core"],langBundles:["album-page","meta"]});YUI.add("album-privacy-models",(function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ListFetchers["flickr-photosets-getPhotos"].run(e,this.appContext)}},attributes:{totalCount:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},hasPhotosPrivate:{readOnly:!0,derivedBy:["totalCount","countPhotosPublic"],defaultFn:function(t){return this.getValue(t,"totalCount")-this.getValue(t,"countPhotosPublic")}},countPhotosFamily:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosFriend:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosFriendFamily:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosPublic:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photosets-getPhotos-fetcher"]});YUI.add("hermes-lang-meta",(function(e,l){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s "},{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"photo on Flickr!"}]},other:{value:[{type:7},{type:0,value:" photos on Flickr!"}]}},offset:0,pluralType:"cardinal"}],PHOTOSTREAM_NO_PHOTOS:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s photos on Flickr!"}],ALBUMS_LIST:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s "},{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"album on Flickr!"}]},other:{value:[{type:7},{type:0,value:" albums on Flickr!"}]}},offset:0,pluralType:"cardinal"}],ALBUMS_LIST_NO_ALBUMS:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s albums on Flickr!"}],FAVORITES:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s "},{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"favorites on Flickr!"}]},other:{value:[{type:7},{type:0,value:" favorites on Flickr!"}]}},offset:0,pluralType:"cardinal"}],FAVORITES_NO_PHOTOS:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s favorites on Flickr!"}],META_DESCRIPTION_BY_USER_ON_FLICKR:[{type:0,value:"By "},{type:1,value:"username"},{type:0,value:" on Flickr"}],PHOTOSTREAM_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"username"},{type:0,value:"’s Photostream Atom feed"}],FAVORITES_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"username"},{type:0,value:"’s Favorites Atom feed"}],GROUP_POOL_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"groupName"},{type:0,value:"’s Photos Atom feed"}],GROUP_DISCUSSIONS_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"groupName"},{type:0,value:"’s Discussions Atom feed"}],ALBUM_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"username"},{type:0,value:'’s "'},{type:1,value:"albumTitle"},{type:0,value:'" Atom feed'}]})}),"@VERSION@",{requires:["intl"]});