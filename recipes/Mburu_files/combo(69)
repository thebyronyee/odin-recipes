YUI.add("hermes-template-photo-card-engagement",(function(n,e){var t=n.Template.Handlebars.revive({1:function(n,e,t,l,a){return" theme-overlay"},3:function(n,e,t,l,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(t,"outlet")||e&&o(e,"outlet")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=e?o(e,"like-engagement-item-view"):e,{name:"outlet",hash:{},data:a,loc:{start:{line:5,column:2},end:{line:5,column:38}}}))+"\n"},5:function(n,e,t,l,a){var o,r=null!=e?e:n.nullContext||{},u=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<span role="button" class="engagement-item fave '+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"isFaved"):o,{name:"if",hash:{},fn:n.program(6,a,0),inverse:n.noop,data:a,loc:{start:{line:7,column:50},end:{line:7,column:99}}}))?o:"")+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"canFave"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(8,a,0),data:a,loc:{start:{line:7,column:99},end:{line:7,column:155}}}))?o:"")+'" tabindex="0">\n\t\t\t<span class="engagement-icon">\n\t\t\t\t<i class="animated-fave-star"></i>\n\t\t\t</span>\n\t\t\t<span class="engagement-count'+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"faveCount"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(10,a,0),data:a,loc:{start:{line:11,column:32},end:{line:11,column:83}}}))?o:"")+'">\n\t\t\t\t'+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"faveCount"):o,{name:"if",hash:{},fn:n.program(12,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:4},end:{line:12,column:96}}}))?o:"")+"\n\t\t\t</span>\n\t\t</span>\n"},6:function(n,e,t,l,a){return" faved"},8:function(n,e,t,l,a){return" can-not-fave"},10:function(n,e,t,l,a){return" empty"},12:function(n,e,t,l,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return n.escapeExpression((r(t,"formatNumber")||e&&r(e,"formatNumber")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=(o=null!=(o=null!=e?r(e,"photoItem"):e)?r(o,"engagement"):o)?r(o,"faveCount"):o,{name:"formatNumber",hash:{},data:a,loc:{start:{line:12,column:42},end:{line:12,column:89}}}))},14:function(n,e,t,l,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return n.escapeExpression((r(t,"formatNumber")||e&&r(e,"formatNumber")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=(o=null!=(o=null!=e?r(e,"photoItem"):e)?r(o,"engagement"):o)?r(o,"commentCount"):o,{name:"formatNumber",hash:{},data:a,loc:{start:{line:22,column:44},end:{line:22,column:94}}}))},16:function(n,e,t,l,a){return'\t\t<span role="button" class="engagement-item curate" tabindex="0">\n\t\t\t<span class="engagement-icon">\n\t\t\t\t<svg class="icon icon-curate"><use xlink:href="#icon-curate"></use></svg>\n\t\t\t</span>\n\t\t</span>\n'},18:function(n,e,t,l,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(t,"outlet")||e&&o(e,"outlet")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=e?o(e,"fluid-share-photo-view"):e,{name:"outlet",hash:{},data:a,loc:{start:{line:33,column:2},end:{line:33,column:35}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(n,e,t,l,a){var o,r=null!=e?e:n.nullContext||{},u=n.hooks.helperMissing,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="photo-card-engagement\n\t'+(null!=(o=(i(t,"ifCond")||e&&i(e,"ifCond")||u).call(r,null!=e?i(e,"theme"):e,"===","overlay",{name:"ifCond",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:1},end:{line:2,column:59}}}))?o:"")+'">\n\n'+(null!=(o=(i(t,"isFlipped")||e&&i(e,"isFlipped")||u).call(r,"enable-likes",{name:"isFlipped",hash:{},fn:n.program(3,a,0),inverse:n.program(5,a,0),data:a,loc:{start:{line:4,column:1},end:{line:15,column:15}}}))?o:"")+'\t\n\t<span role="button" class="engagement-item comment" tabindex="0">\n\t\t<span class="engagement-icon">\n\t\t\t<svg class="icon icon-comment_hollow"><use xlink:href="#icon-comment_hollow"></use></svg>\n\t\t</span>\n\t\t<span class="engagement-count'+(null!=(o=i(t,"if").call(r,null!=(o=null!=(o=null!=e?i(e,"photoItem"):e)?i(o,"engagement"):o)?i(o,"commentCount"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(10,a,0),data:a,loc:{start:{line:21,column:31},end:{line:21,column:85}}}))?o:"")+'">\n\t\t\t'+(null!=(o=i(t,"if").call(r,null!=(o=null!=(o=null!=e?i(e,"photoItem"):e)?i(o,"engagement"):o)?i(o,"commentCount"):o,{name:"if",hash:{},fn:n.program(14,a,0),inverse:n.noop,data:a,loc:{start:{line:22,column:3},end:{line:22,column:101}}}))?o:"")+"\n\t\t</span>\n\t</span>\n"+(null!=(o=i(t,"if").call(r,null!=e?i(e,"displayCurate"):e,{name:"if",hash:{},fn:n.program(16,a,0),inverse:n.noop,data:a,loc:{start:{line:25,column:1},end:{line:31,column:8}}}))?o:"")+(null!=(o=i(t,"if").call(r,null!=e?i(e,"displayShare"):e,{name:"if",hash:{},fn:n.program(18,a,0),inverse:n.noop,data:a,loc:{start:{line:32,column:1},end:{line:34,column:8}}}))?o:"")+"</div>\n"},useData:!0}),l={};n.Array.each([],(function(e){var t=n.Template.get("hermes/"+e);t&&(l[e]=t)})),n.Template.register("hermes/photo-card-engagement",(function(e,a){return(a=a||{}).partials=a.partials?n.merge(l,a.partials):l,t(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-card-description-tooltip",(function(e,r){var t=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,r,t,a,n){var o=e.lookupProperty||function(e,r){if(Object.prototype.hasOwnProperty.call(e,r))return e[r]};return'<div class="photo-card-description-tooltip">\n\t<div class="description-content">\n\t\t'+e.escapeExpression((o(t,"renderTrustedMarkup")||r&&o(r,"renderTrustedMarkup")||e.hooks.helperMissing).call(null!=r?r:e.nullContext||{},null!=r?o(r,"description"):r,{name:"renderTrustedMarkup",hash:{},data:n,loc:{start:{line:3,column:2},end:{line:3,column:37}}}))+"\n\t</div>\n</div>"},useData:!0}),a={};e.Array.each([],(function(r){var t=e.Template.get("hermes/"+r);t&&(a[r]=t)})),e.Template.register("hermes/photo-card-description-tooltip",(function(r,n){return(n=n||{}).partials=n.partials?e.merge(a,n.partials):a,t(r,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-video-player",(function(e,t){var a=require("hermes-core/flog")(t),o={playlistUrl:e.url("/video_playlist.gne",{protocol:!1}),lang:e.config.lang,defaultResolution:"1080p",qualities:["1080p","720p","appletv","360p","700","300","100","iphone_wifi","288p"],atlas:{maxBitrate:4e3,domain:"video.yahoo.com"},css:{processing:"processing"},messages:{processing:"This video is being processed"}};e.FlickrVideoPlayer=function(e){this.container=e.container,this.model=e.model,this.appContext=e.appContext,this.currentStream=null,this.videoNode=e.videoNode,this.showControls=void 0===e.showControls||e.showControls,this.autoplay=e.autoplay||!1,this.loop=e.loop||!1,this.muted=e.muted||!1,this.inactivityTimeout=e.inactivityTimeout||void 0,this.controlBar=e.controlBar||{}},e.FlickrVideoPlayer.prototype={render:function(){var t=this;if(this.setCurrentStream(o.defaultResolution,"noop"),this.player)return this.player.on("error",(function(){var a=t.player.error();e.config.win.beaconError&&e.config.win.beaconError("[HTML5 Video Player] A stream could not be played: Code "+a.code+" - "+a.message,e.config.win.location.href,a);var i=o.qualities.indexOf(t.currentStream.resolution);if(i<o.qualities.length-1){var r=o.qualities[i+1];t.setCurrentStream(r,"noop"),t.player.src(t.currentStream.url)}})),this.player.on("loadeddata",(function(){})),this.player.on("waiting",(function(){t.waitStartTimestamp=new Date})),this.player.on("readystatechange",(function(){t.waitStartTimestamp&&t.player.readyState()>=3&&(t.waitStartTimestamp=0)})),this.player.src(this.currentStream.url),this.sourceSetTimestamp=new Date,this},play:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},resize:function(e,t){this.container.setStyles({width:e+"px",height:t+"px"})},setCurrentStream:function(e,t){this.currentStream&&this.quality&&this.quality.removeClass("q"+this.currentStream.resolution),this.currentStream=this.getStream(e,!1),this.quality&&this.quality.addClass("q"+this.currentStream.resolution),t||(this.player.playlist.clear(),this.player.playlist.addItem(this.toMediaItem(this.currentStream)),this.player.playlist.setPosition(0))},toMediaItem:function(e){return{streamUrl:e.url,images:this.getThumbnails()}},init:function(){var t=this;return this.appContext.flipper.isFlipped("disable-video-playback")?e.Promise.resolve():new e.FlickrPromise({streams:this.loadStreams(),domLive:this._waitDomLive()}).then((function(e){return t.loadScript().then((function(){t.isProcessing||t.render()}))}),(function(e){console.warn("Error:"+e)}))},_waitDomLive:function(){var t=this;return new e.Promise((function(e,a){var o,i=50;(o=function(){if(t.container){for(var a=t.container.getDOMNode().parentElement.parentElement;a&&a!==document.body;)a=a.parentElement;if(a)return e();if(i--<0)return}setTimeout(o,100)})()}))},getStream:function(e,t){var a,i,r=o.qualities.slice(0);for(e&&(i=r.indexOf(e)+(t?1:0),r=i>0?r.slice(i):r);r.length;)if(a=this.streams[r.shift()])return a;return this.showErrorMessage(),{}},showErrorMessage:function(){e.one(".vjs-modal-dialog").addClass("show"),e.config.win.beaconError&&e.config.win.beaconError("[HTML5 Video Player] No playable streams",e.config.win.location.href)},getThumbnails:function(){var e,t;return t=this.container?{width:parseInt(this.container.getComputedStyle("width"),10)||800,height:parseInt(this.container.getComputedStyle("height"),10)||600}:{width:800,height:800},{large:(e=this.model.getSizeToFit(t,{excludeSizes:[]})).url,medium:e.url,small:e.url}},loadScript:function(){var t=this;return new e.Promise((function(a,o){e.VideoPlatform?a():t.isProcessing||e.use("videojs",(function(){t.addLanguages(),window.videojs(t.videoNode,{controls:t.showControls,poster:t.getThumbnails().large,autoplay:t.autoplay,loop:t.loop,muted:t.muted,inactivityTimeout:t.inactivityTimeout,controlBar:t.controlBar},(function(){t.player=this,a()}))}))}))},loadStreams:function(){var t=this;return new e.Promise((function(e,o){var i;i={photo_id:t.model.getValue("id"),secret:t.model.getValue("secret")},t.appContext.callAPI("flickr.video.getStreamInfo",i).then((function(o){try{t.streams=o.streams.stream.reduce((function(e,t){var a=t.type+"";return e[a]={resolution:a,url:t.content},e}),{})}catch(e){t.streams={}}Object.keys(t.streams).length||a.error("no streams available"),e()}),(function(e){if(e&&e.code&&"1"===e.code.toString())return t.setProcessing();a.error("error fetching playlist")}))}))},_cleanup:function(e){e=e.getDOMNode();var t=function(e){if(e.firstChild)for(;e.firstChild;)t(e.firstChild),e.removeChild(e.firstChild)};t(e)},setProcessing:function(){this.isProcessing=!0,this.videoNode.style.display="none";var t=e.Node.create("<img/>");t.set("src",this.getThumbnails().large),this.container.appendChild(t)},getPlayer:function(){return this.player},addLanguages:function(){switch(this.appContext.lang.toLowerCase()){case"zh-hant-hk":window.videojs.addLanguage("zh",{Play:"播放",Pause:"暂停","Current Time":"当前时间",Duration:"时长","Remaining Time":"剩余时间","Stream Type":"媒体流类型",LIVE:"直播",Loaded:"加载完毕",Progress:"进度",Fullscreen:"全屏","Non-Fullscreen":"退出全屏",Mute:"静音",Unmute:"取消静音","Playback Rate":"播放速度",Subtitles:"字幕","subtitles off":"关闭字幕",Captions:"内嵌字幕","captions off":"关闭内嵌字幕",Chapters:"节目段落","Close Modal Dialog":"关闭弹窗",Descriptions:"描述","descriptions off":"关闭描述","Audio Track":"音轨","You aborted the media playback":"视频播放被终止","A network error caused the media download to fail part-way.":"网络错误导致视频下载中途失败。","The media could not be loaded, either because the server or network failed or because the format is not supported.":"视频因格式不支持或者服务器或网络的问题无法加载。","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"由于视频文件损坏或是该视频使用了你的浏览器不支持的功能，播放终止。","No compatible source was found for this media.":"无法找到此视频兼容的源。","The media is encrypted and we do not have the keys to decrypt it.":"视频已加密，无法解密。","Play Video":"播放视频",Close:"关闭","Modal Window":"弹窗","This is a modal window":"这是一个弹窗","This modal can be closed by pressing the Escape key or activating the close button.":"可以按ESC按键或启用关闭按钮来关闭此弹窗。",", opens captions settings dialog":", 开启标题设置弹窗",", opens subtitles settings dialog":", 开启字幕设置弹窗",", opens descriptions settings dialog":", 开启描述设置弹窗",", selected":", 选择","captions settings":"字幕设定","Audio Player":"音频播放器","Video Player":"视频播放器",Replay:"重播","Progress Bar":"进度小节","Volume Level":"音量","subtitles settings":"字幕设定","descriptions settings":"描述设定",Text:"文字",White:"白",Black:"黑",Red:"红",Green:"绿",Blue:"蓝",Yellow:"黄",Magenta:"紫红",Cyan:"青",Background:"背景",Window:"视窗",Transparent:"透明","Semi-Transparent":"半透明",Opaque:"不透明","Font Size":"字体尺寸","Text Edge Style":"字体边缘样式",None:"无",Raised:"浮雕",Depressed:"压低",Uniform:"均匀",Dropshadow:"下阴影","Font Family":"字体库","Proportional Sans-Serif":"比例无细体","Monospace Sans-Serif":"单间隔无细体","Proportional Serif":"比例细体","Monospace Serif":"单间隔细体",Casual:"舒适",Script:"手写体","Small Caps":"小型大写字体",Reset:"重启","restore all settings to the default values":"恢复全部设定至预设值",Done:"完成","Caption Settings Dialog":"字幕设定视窗","Beginning of dialog window. Escape will cancel and close the window.":"开始对话视窗。离开会取消及关闭视窗","End of dialog window.":"结束对话视窗"});break;case"de-de":window.videojs.addLanguage("de",{Play:"Wiedergabe",Pause:"Pause",Replay:"Erneut abspielen","Current Time":"Aktueller Zeitpunkt",Duration:"Dauer","Remaining Time":"Verbleibende Zeit","Stream Type":"Streamtyp",LIVE:"LIVE",Loaded:"Geladen",Progress:"Status",Fullscreen:"Vollbild","Non-Fullscreen":"Kein Vollbild",Mute:"Ton aus",Unmute:"Ton ein","Playback Rate":"Wiedergabegeschwindigkeit",Subtitles:"Untertitel","subtitles off":"Untertitel aus",Captions:"Untertitel","captions off":"Untertitel aus",Chapters:"Kapitel","You aborted the media playback":"Sie haben die Videowiedergabe abgebrochen.","A network error caused the media download to fail part-way.":"Der Videodownload ist aufgrund eines Netzwerkfehlers fehlgeschlagen.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Das Video konnte nicht geladen werden, da entweder ein Server- oder Netzwerkfehler auftrat oder das Format nicht unterstützt wird.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Die Videowiedergabe wurde entweder wegen eines Problems mit einem beschädigten Video oder wegen verwendeten Funktionen, die vom Browser nicht unterstützt werden, abgebrochen.","No compatible source was found for this media.":"Für dieses Video wurde keine kompatible Quelle gefunden.","Play Video":"Video abspielen",Close:"Schließen","Modal Window":"Modales Fenster","This is a modal window":"Dies ist ein modales Fenster","This modal can be closed by pressing the Escape key or activating the close button.":'Durch Drücken der Esc-Taste bzw. Betätigung der Schaltfläche "Schließen" wird dieses modale Fenster geschlossen.',", opens captions settings dialog":", öffnet Einstellungen für Untertitel",", opens subtitles settings dialog":", öffnet Einstellungen für Untertitel",", selected":", ausgewählt","captions settings":"Untertiteleinstellungen","subtitles settings":"Untertiteleinstellungen","descriptions settings":"Einstellungen für Beschreibungen","Close Modal Dialog":"Modales Fenster schließen",Descriptions:"Beschreibungen","descriptions off":"Beschreibungen aus","The media is encrypted and we do not have the keys to decrypt it.":"Die Entschlüsselungsschlüssel für den verschlüsselten Medieninhalt sind nicht verfügbar.",", opens descriptions settings dialog":", öffnet Einstellungen für Beschreibungen","Audio Track":"Tonspur",Text:"Schrift",White:"Weiß",Black:"Schwarz",Red:"Rot",Green:"Grün",Blue:"Blau",Yellow:"Gelb",Magenta:"Magenta",Cyan:"Türkis",Background:"Hintergrund",Window:"Fenster",Transparent:"Durchsichtig","Semi-Transparent":"Halbdurchsichtig",Opaque:"Undurchsictig","Font Size":"Schriftgröße","Text Edge Style":"Textkantenstil",None:"Kein",Raised:"Erhoben",Depressed:"Gedrückt",Uniform:"Uniform",Dropshadow:"Schlagschatten","Font Family":"Schristfamilie","Proportional Sans-Serif":"Proportionale Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportionale Serif","Monospace Serif":"Monospace Serif",Casual:"Zwanglos",Script:"Schreibeschrift","Small Caps":"Small-Caps",Reset:"Zurücksetzen","restore all settings to the default values":"Alle Einstellungen auf die Standardwerte zurücksetzen",Done:"Fertig","Caption Settings Dialog":"Einstellungsdialog für Untertitel","Beginning of dialog window. Escape will cancel and close the window.":"Anfang des Dialogfensters. Esc bricht ab und schließt das Fenster.","End of dialog window.":"Ende des Dialogfensters.","Audio Player":"Audio-Player","Video Player":"Video-Player","Progress Bar":"Forschrittsbalken","progress bar timing: currentTime={1} duration={2}":"{1} von {2}","Volume Level":"Lautstärkestufe"});break;case"es-us":window.videojs.addLanguage("es",{Play:"Reproducir","Play Video":"Reproducir Video",Pause:"Pausar","Current Time":"Tiempo reproducido",Duration:"Duración total","Remaining Time":"Tiempo restante","Stream Type":"Tipo de secuencia",LIVE:"DIRECTO",Loaded:"Cargado",Progress:"Progreso",Fullscreen:"Pantalla completa","Non-Fullscreen":"Pantalla no completa",Mute:"Silenciar",Unmute:"No silenciado","Playback Rate":"Velocidad de reproducción",Subtitles:"Subtítulos","subtitles off":"Subtítulos desactivados",Captions:"Subtítulos especiales","captions off":"Subtítulos especiales desactivados",Chapters:"Capítulos","You aborted the media playback":"Ha interrumpido la reproducción del vídeo.","A network error caused the media download to fail part-way.":"Un error de red ha interrumpido la descarga del vídeo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"No se ha podido cargar el vídeo debido a un fallo de red o del servidor o porque el formato es incompatible.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La reproducción de vídeo se ha interrumpido por un problema de corrupción de datos o porque el vídeo precisa funciones que su navegador no ofrece.","No compatible source was found for this media.":"No se ha encontrado ninguna fuente compatible con este vídeo."});break;case"fr-fr":window.videojs.addLanguage("fr",{"Audio Player":"Lecteur audio","Video Player":"Lecteur vidéo",Play:"Lecture",Pause:"Pause",Replay:"Revoir","Current Time":"Temps actuel",Duration:"Durée","Remaining Time":"Temps restant","Stream Type":"Type de flux",LIVE:"EN DIRECT",Loaded:"Chargé",Progress:"Progression","Progress Bar":"Barre de progression","progress bar timing: currentTime={1} duration={2}":"{1} de {2}",Fullscreen:"Plein écran","Non-Fullscreen":"Fenêtré",Mute:"Sourdine",Unmute:"Son activé","Playback Rate":"Vitesse de lecture",Subtitles:"Sous-titres","subtitles off":"Sous-titres désactivés",Captions:"Sous-titres transcrits","captions off":"Sous-titres transcrits désactivés",Chapters:"Chapitres",Descriptions:"Descriptions","descriptions off":"descriptions désactivées","Audio Track":"Piste audio","Volume Level":"Niveau de volume","You aborted the media playback":"Vous avez interrompu la lecture de la vidéo.","A network error caused the media download to fail part-way.":"Une erreur de réseau a interrompu le téléchargement de la vidéo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Cette vidéo n'a pas pu être chargée, soit parce que le serveur ou le réseau a échoué ou parce que le format n'est pas reconnu.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La lecture de la vidéo a été interrompue à cause d'un problème de corruption ou parce que la vidéo utilise des fonctionnalités non prises en charge par votre navigateur.","No compatible source was found for this media.":"Aucune source compatible n'a été trouvée pour cette vidéo.","The media is encrypted and we do not have the keys to decrypt it.":"Le média est chiffré et nous n'avons pas les clés pour le déchiffrer.","Play Video":"Lire la vidéo",Close:"Fermer","Close Modal Dialog":"Fermer la boîte de dialogue modale","Modal Window":"Fenêtre modale","This is a modal window":"Ceci est une fenêtre modale","This modal can be closed by pressing the Escape key or activating the close button.":"Ce modal peut être fermé en appuyant sur la touche Échap ou activer le bouton de fermeture.",", opens captions settings dialog":", ouvrir les paramètres des sous-titres transcrits",", opens subtitles settings dialog":", ouvrir les paramètres des sous-titres",", opens descriptions settings dialog":", ouvrir les paramètres des descriptions",", selected":", sélectionné","captions settings":"Paramètres des sous-titres transcrits","subtitles settings":"Paramètres des sous-titres","descriptions settings":"Paramètres des descriptions",Text:"Texte",White:"Blanc",Black:"Noir",Red:"Rouge",Green:"Vert",Blue:"Bleu",Yellow:"Jaune",Magenta:"Magenta",Cyan:"Cyan",Background:"Arrière-plan",Window:"Fenêtre",Transparent:"Transparent","Semi-Transparent":"Semi-transparent",Opaque:"Opaque","Font Size":"Taille des caractères","Text Edge Style":"Style des contours du texte",None:"Aucun",Raised:"Élevé",Depressed:"Enfoncé",Uniform:"Uniforme",Dropshadow:"Ombre portée","Font Family":"Famille de polices","Proportional Sans-Serif":"Polices à chasse variable sans empattement (Proportional Sans-Serif)","Monospace Sans-Serif":"Polices à chasse fixe sans empattement (Monospace Sans-Serif)","Proportional Serif":"Polices à chasse variable avec empattement (Proportional Serif)","Monospace Serif":"Polices à chasse fixe avec empattement (Monospace Serif)",Casual:"Manuscrite",Script:"Scripte","Small Caps":"Petites capitales",Reset:"Réinitialiser","restore all settings to the default values":"Restaurer tous les paramètres aux valeurs par défaut",Done:"Terminé","Caption Settings Dialog":"Boîte de dialogue des paramètres des sous-titres transcrits","Beginning of dialog window. Escape will cancel and close the window.":"Début de la fenêtre de dialogue. La touche d'échappement annulera et fermera la fenêtre.","End of dialog window.":"Fin de la fenêtre de dialogue."});break;case"ko-kr":window.videojs.addLanguage("ko",{Play:"재생",Pause:"일시중지","Play Video":"재생","Current Time":"현재 시간",Duration:"지정 기간","Remaining Time":"남은 시간","Stream Type":"스트리밍 유형",LIVE:"라이브",Loaded:"로드됨",Progress:"진행",Fullscreen:"전체 화면","Non-Fullscreen":"전체 화면 해제",Mute:"음소거",Unmute:"음소거 해제","Playback Rate":"재생 비율",Subtitles:"서브타이틀","subtitles off":"서브타이틀 끄기",Captions:"자막","captions off":"자막 끄기",Chapters:"챕터","You aborted the media playback":"비디오 재생을 취소했습니다.","A network error caused the media download to fail part-way.":"네트워크 오류로 인하여 비디오 일부를 다운로드하지 못 했습니다.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"비디오를 로드할 수 없습니다. 서버 혹은 네트워크 오류 때문이거나 지원되지 않는 형식 때문일 수 있습니다.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"비디오 재생이 취소됐습니다. 비디오가 손상되었거나 비디오가 사용하는 기능을 브라우저에서 지원하지 않는 것 같습니다.","No compatible source was found for this media.":"비디오에 호환되지 않는 소스가 있습니다."});break;case"it-it":window.videojs.addLanguage("it",{Play:"Play",Pause:"Pausa","Current Time":"Orario attuale",Duration:"Durata","Remaining Time":"Tempo rimanente","Stream Type":"Tipo del Streaming",LIVE:"LIVE",Loaded:"Caricato",Progress:"Stato",Fullscreen:"Schermo intero","Non-Fullscreen":"Chiudi schermo intero",Mute:"Muto",Unmute:"Audio","Playback Rate":"Tasso di riproduzione",Subtitles:"Sottotitoli","subtitles off":"Senza sottotitoli",Captions:"Sottotitoli non udenti","captions off":"Senza sottotitoli non udenti",Chapters:"Capitolo","You aborted the media playback":"La riproduzione del filmato è stata interrotta.","A network error caused the media download to fail part-way.":"Il download del filmato è stato interrotto a causa di un problema rete.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Il filmato non può essere caricato a causa di un errore nel server o nella rete o perché il formato non viene supportato.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La riproduzione del filmato è stata interrotta a causa di un file danneggiato o per l’utilizzo di impostazioni non supportate dal browser.","No compatible source was found for this media.":"Non ci sono fonti compatibili per questo filmato."});break;case"pt-br":window.videojs.addLanguage("pt",{"Audio Player":"Reprodutor de áudio","Video Player":"Reprodutor de vídeo",Play:"Tocar",Pause:"Pausar",Replay:"Tocar novamente","Current Time":"Tempo",Duration:"Duração","Remaining Time":"Tempo Restante","Stream Type":"Tipo de Stream",LIVE:"AO VIVO",Loaded:"Carregado",Progress:"Progresso","Progress Bar":"Barra de progresso","progress bar timing: currentTime={1} duration={2}":"{1} de {2}",Fullscreen:"Tela Cheia","Non-Fullscreen":"Tela Normal",Mute:"Mudo",Unmute:"Habilitar Som","Playback Rate":"Velocidade",Subtitles:"Legendas","subtitles off":"Sem Legendas",Captions:"Anotações","captions off":"Sem Anotações",Chapters:"Capítulos",Descriptions:"Descrições","descriptions off":"sem descrições","Audio Track":"Faixa de áudio","Volume Level":"Nível de volume","You aborted the media playback":"Você parou a execução do vídeo.","A network error caused the media download to fail part-way.":"Um erro na rede causou falha durante o download da mídia.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"A mídia não pode ser carregada, por uma falha de rede ou servidor ou o formato não é suportado.","No compatible source was found for this media.":"Nenhuma fonte foi encontrada para esta mídia.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"A reprodução foi interrompida devido à um problema de mídia corrompida ou porque a mídia utiliza funções que seu navegador não suporta.","The media is encrypted and we do not have the keys to decrypt it.":"A mídia está criptografada e não temos as chaves para descriptografar.","Play Video":"Tocar Vídeo",Close:"Fechar","Close Modal Dialog":"Fechar Diálogo Modal","Modal Window":"Janela Modal","This is a modal window":"Isso é uma janela-modal","This modal can be closed by pressing the Escape key or activating the close button.":"Esta janela pode ser fechada pressionando a tecla de Escape.",", opens captions settings dialog":", abre as configurações de legendas de comentários",", opens subtitles settings dialog":", abre as configurações de legendas",", opens descriptions settings dialog":", abre as configurações",", selected":", selecionada","captions settings":"configurações de legendas de comentários","subtitles settings":"configurações de legendas","descriptions settings":"configurações das descrições",Text:"Texto",White:"Branco",Black:"Preto",Red:"Vermelho",Green:"Verde",Blue:"Azul",Yellow:"Amarelo",Magenta:"Magenta",Cyan:"Ciano",Background:"Plano-de-Fundo",Window:"Janela",Transparent:"Transparente","Semi-Transparent":"Semi-Transparente",Opaque:"Opaco","Font Size":"Tamanho da Fonte","Text Edge Style":"Estilo da Borda",None:"Nenhum",Raised:"Elevado",Depressed:"Acachapado",Uniform:"Uniforme",Dropshadow:"Sombra de projeção","Font Family":"Família da Fonte","Proportional Sans-Serif":"Sans-Serif(Sem serifa) Proporcional","Monospace Sans-Serif":"Sans-Serif(Sem serifa) Monoespaçada","Proportional Serif":"Serifa Proporcional","Monospace Serif":"Serifa Monoespaçada",Casual:"Casual",Script:"Script","Small Caps":"Maiúsculas Pequenas",Reset:"Redefinir","restore all settings to the default values":"restaurar todas as configurações aos valores padrão",Done:"Salvar","Caption Settings Dialog":"Caíxa-de-Diálogo das configurações de Legendas","Beginning of dialog window. Escape will cancel and close the window.":"Iniciando a Janela-de-Diálogo. Pressionar Escape irá cancelar e fechar a janela.","End of dialog window.":"Fim da Janela-de-Diálogo","{1} is loading.":"{1} está carregando."});break;case"vi-vn":window.videojs.addLanguage("vi",{"Audio Player":"Trình phát Audio","Video Player":"Trình phát Video",Play:"Phát",Pause:"Tạm dừng",Replay:"Phát lại","Current Time":"Thời gian hiện tại",Duration:"Độ dài","Remaining Time":"Thời gian còn lại","Stream Type":"Kiểu Stream",LIVE:"TRỰC TIẾP",Loaded:"Đã tải",Progress:"Tiến trình","Progress Bar":"Thanh tiến trình","progress bar timing: currentTime={1} duration={2}":"{1} của {2}",Fullscreen:"Toàn màn hình","Non-Fullscreen":"Thoát toàn màn hình",Mute:"Tắt tiếng",Unmute:"Bật âm thanh","Playback Rate":"Tỉ lệ phát lại",Subtitles:"Phụ đề","subtitles off":"tắt phụ đề",Captions:"Chú thích","captions off":"tắt chú thích",Chapters:"Chương",Descriptions:"Mô tả","descriptions off":"tắt mô tả","Audio Track":"Track âm thanh","Volume Level":"Mức âm lượng","You aborted the media playback":"Bạn đã hủy việc phát lại media.","A network error caused the media download to fail part-way.":"Một lỗi mạng dẫn đến việc tải media bị lỗi.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video không tải được, mạng hay server có lỗi hoặc định dạng không được hỗ trợ.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Phát media đã bị hủy do một sai lỗi hoặc media sử dụng những tính năng trình duyệt không hỗ trợ.","No compatible source was found for this media.":"Không có nguồn tương thích cho media này.","The media is encrypted and we do not have the keys to decrypt it.":"Media đã được mã hóa và chúng tôi không có để giải mã nó.","Play Video":"Phát Video",Close:"Đóng","Close Modal Dialog":"Đóng cửa sổ","Modal Window":"Cửa sổ","This is a modal window":"Đây là một cửa sổ","This modal can be closed by pressing the Escape key or activating the close button.":"Cửa sổ này có thể thoát bằng việc nhấn phím Esc hoặc kích hoạt nút đóng.",", opens captions settings dialog":", mở hộp thoại cài đặt chú thích",", opens subtitles settings dialog":", mở hộp thoại cài đặt phụ đề",", opens descriptions settings dialog":", mở hộp thoại cài đặt mô tả",", selected":", đã chọn","captions settings":"cài đặt chú thích","subtitles settings":"cài đặt phụ đề","descriptions settings":"cài đặt mô tả",Text:"Văn bản",White:"Trắng",Black:"Đen",Red:"Đỏ",Green:"Xanh lá cây",Blue:"Xanh da trời",Yellow:"Vàng",Magenta:"Đỏ tươi",Cyan:"Lam",Background:"Nền",Window:"Cửa sổ",Transparent:"Trong suốt","Semi-Transparent":"Bán trong suốt",Opaque:"Mờ","Font Size":"Kích cỡ phông chữ","Text Edge Style":"Dạng viền văn bản",None:"None",Raised:"Raised",Depressed:"Depressed",Uniform:"Uniform",Dropshadow:"Dropshadow","Font Family":"Phông chữ","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif",Casual:"Casual",Script:"Script","Small Caps":"Small Caps",Reset:"Đặt lại","restore all settings to the default values":"khôi phục lại tất cả các cài đặt về giá trị mặc định",Done:"Xong","Caption Settings Dialog":"Hộp thoại cài đặt chú thích","Beginning of dialog window. Escape will cancel and close the window.":"Bắt đầu cửa sổ hộp thoại. Esc sẽ thoát và đóng cửa sổ.","End of dialog window.":"Kết thúc cửa sổ hộp thoại."});break;case"id-id":window.videojs.addLanguage("id-id",{Play:"Putar Video",Pause:"Jeda Video","Play Video":"Putar Video",Mute:"bisu",Unmute:"bersuara"})}},destroy:function(){var e=this;try{if(window.videojs&&window.videojs.getPlayers){var t=window.videojs.getPlayers();Object.keys(t).forEach((function(a){t[a]===e.player&&(t[a].dispose(),window.videojs.players[a]&&delete window.videojs.players[a])}))}this.player&&this.player.destroy&&this.player.destroy(),this.player=null,this.quality&&this.quality.detach(),this.quality=null,this._cleanup(this.container),this.container=null,this.model=null,this.appContext=null,this.streams=null}catch(e){}}}}),"@VERSION@",{requires:["flickr-promise","flutil","url"],optionalRequires:["hermes-core"],optional:[]});YUI.add("photo-card-view",(function(e,t){require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("photo-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.params=t,this.set("isActiveViewAgnostic",!0),this.viewCounter=this.appContext.getViewCounter(),this.photoCardHelper=this.params.photoCardHelper||new e.PhotoCardHelper(this.appContext),this.params.theme="theme"in this.params?this.params.theme:"card",this.params.showFooter=this.params.showDetailsFooter||this.params.showInfoBar,this.params.photoConfig.showFootOverlay=this.params.photoConfig.showDetailsFooterOverlay||this.params.photoConfig.showInfoBarOverlay,this.cardViews={},this.prevBreakpointWidth=0,this.hasBuilt=!1,this.queuedRerenderLayout=void 0,this.isRendering=!1,this.isPhotoListItem=t.isPhotoListItem,this.params.showWithoutFadeIn=this.isPhotoListItem,this.layoutItem=this.params.layoutItem,this.params.isBatchLayout||this.pickDisplayUrl(),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){this.isRendering=!0,this.isFullyActivated=!1,this.isAwake=!1,this.prevBreakpointWidth=0,this.setContainerWithTemplate("photo-card",this.params),this.isPhotoListItem&&this.setInitialGeometry(this.layoutItem)},activate:function(){var t=this,o=this.get("container"),i=t.params.batchLayout;if(this.photoCardNode=o.one(".photo-card"),this.cardContentNode=o.one(".photo-card-content"),this.engagementNode=o.one(".foot .engagement-container"),this.headerNode=o.one(".header-container"),this.params.isBatchLayout||(this.photoNode=o.one(".photo")),this.params.photoConfig.showFootOverlay&&(this.footOverlayNode=o.one(".foot-overlay"),this.params.photoConfig.showInfoBarOverlay&&(this.infoBarOverlayNode=this.footOverlayNode.one(".info-bar"),this.leftContainerOverlayNode=this.infoBarOverlayNode.one(".left-container"),this.engagementOverlayNode=o.one(".foot-overlay .engagement-container")),this.params.photoConfig.showDetailsFooterOverlay&&(this.detailsOverlayNode=this.footOverlayNode.one(".details-footer"),this.descriptionNode=this.detailsOverlayNode.one(".description"),this.descriptionContentNode=this.detailsOverlayNode.one(".description-content"),this.descriptionMoreButton=this.detailsOverlayNode.one(".description-more-button"),this.registerEventHandler(this.descriptionMoreButton.on("click",(()=>{this.toggleExpandedDetails(t.detailsOverlayNode,!0)}))))),this.params.photoConfig.showCountOverlay&&(this.moreButton=o.one(".count-overlay-button")),this.params.photoConfig.showHeadOverlay&&(this.headOverlayNode=o.one(".head-overlay"),this.headOverlayViewNode=o.one(".head-overlay .header-container")),this.params.showFooter&&(this.footNode=o.one(".foot"),this.params.showDetailsFooter&&(this.detailsNode=this.footNode.one(".details-footer"),this.descriptionNode=this.detailsNode.one(".description"),this.descriptionContentNode=this.detailsNode.one(".description-content"),this.descriptionMoreButton=this.detailsNode.one(".description-more-button"),this.registerEventHandler(this.descriptionMoreButton.on("click",(()=>{this.toggleExpandedDetails(this.detailsNode,!0)})))),this.params.showInfoBar&&(this.infoBarNode=this.footNode.one(".info-bar"),this.leftContainerNode=this.infoBarNode.one(".left-container"))),!this.params.isBatchLayout&&this.params.photoConfig.photoItem&&!this.params.photoConfig.showPhotoInterstitial&&this.params.photoConfig.photoItem.isVideo&&(this.playButtonNode=o.one(".video-button"),this.params.photoConfig.hasHoverPlay?(this.videoNode=this.photoNode.one("video"),this.playButtonNode.removeClass("hidden"),this.registerEventHandler(this.photoNode.on("mouseenter",this.handleVideoHover.bind(this))),this.registerEventHandler(this.photoNode.on("mouseleave",this.handleVideoUnhover.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:blur",this.handleBlurWindow.bind(this)))):this.playButtonNode.removeClass("hidden")),this.params.photoConfig.canRemovePhoto){this.removePhotoButton=this.photoNode.one(".remove-x-button");var a=this.params.photoConfig.photoItem.photoId;this.removePhotoButton&&this.registerEventHandler(this.removePhotoButton.on("click",(()=>{this.fire("subviewViewEvent","handleRemovePhoto",a)})))}return this.getSubviews().then((()=>this.insertSubviews())).then((()=>{var t,a=this.params.box,s=a?this.params.box.width:this.cardContentNode.get("clientWidth"),n=a?this.params.box.height:0,h=0;if(o.setStyle("width",s),this.params.isBatchLayout){if(i){if(h=this.photoCardHelper.layoutValues[this.params.batchConfig.layoutType].BATCH_CARD_SPACING,Math.abs(s/n-i.width/i.containerHeight)>.01){var r=(s-h)/2,d=r/n,l={aspectRatio:d,width:n*d,height:n,left:0,top:0},p=Object.assign({},l,{left:r+h});i={boxes:[l,p],width:s,containerHeight:n}}else i=this.photoCardHelper.scaleLayout(i,this.cardContentNode.get("clientWidth")/i.width,h,!1,!1);t=this.renderBatchLayout(i)}this.params.batchConfig&&"large"===this.params.batchConfig.layoutType?(i=this.photoCardHelper.generateThreeMaxLayout({photoItems:this.params.item.photoItems,width:s}),t=this.renderBatchLayout(i)):this.params.batchConfig&&"compact"===this.params.batchConfig.layoutType&&(i=this.photoCardHelper.generateCompactBatchLayout({photoItems:this.params.item.photoItems,width:s}),t=this.renderBatchLayout(i))}else this.cardContentNode.setStyle("height",this.params.photoConfig.box.height),this.cardContentNode.setStyle("width",this.params.photoConfig.box.width),t=e.Promise.resolve();return this.bindHoverStateEvents(),this.params.photoConfig.showCountOverlay&&this.registerEventHandler(this.moreButton.on("click",(()=>{this.fire("moreButtonClicked")}))),this.params.showHeader&&this.params.headerConfig.showMenu&&this.registerEventHandler(this.headerView.on("contextMenuItemSelected",(e=>{e.action.onSelected(e)}))),this.params.isBatchLayout?e.Promise.resolve(t).then((()=>(this.finishActivate(),this))):(this.finishActivate(),this)}))},finishActivate:function(){this.photoCardNode.addClass("active"),this.photoCardNode.addClass("shown"),this.isFullyActivated=!0,this.params.isAwakeInitially||this.photoCardHelper.checkInsideViewport(this.get("container"))?this.isAwake?this.updateBreakpoints():this.setAwake(!0):this.setAwake(!1),this.isRendering=!1,this.queuedRerenderLayout&&(this.rerender(this.queuedRerenderLayout),this.queuedRerenderLayout=void 0)},getSubviews:function(){var t=this,o=[];return this.params.showInfoBar&&o.push(this.appContext.getView("photo-card-engagement-view",Object.assign({appContext:this.appContext},{photoItem:this.params.photoConfig.photoItem})).then((function(e){t.engagementView=e}))),this.params.photoConfig.showFootOverlay&&this.params.photoConfig.showInfoBarOverlay&&o.push(this.appContext.getView("photo-card-engagement-view",Object.assign({appContext:this.appContext},{photoItem:this.params.photoConfig.photoItem,theme:"overlay"})).then((function(e){t.engagementOverlayView=e}))),this.params.showHeader&&o.push(this.appContext.getView("photo-card-header-view",Object.assign({appContext:t.appContext},this.params.headerConfig)).then((function(e){t.headerView=e}))),this.params.photoConfig.showHeadOverlay&&o.push(this.appContext.getView("photo-card-header-view",Object.assign({appContext:t.appContext},this.params.photoConfig.headerConfig)).then((function(e){t.headerOverlayView=e}))),e.Promise.all(o)},insertSubviews:function(){var t=this,o=[];return this.params.showInfoBar&&o.push(this.engagementView.initialize().then((function(){return t.engagementNode.append(t.engagementView.get("container")),t.engagementView.normalizedActivate()}))),this.params.photoConfig.showFootOverlay&&this.params.photoConfig.showInfoBarOverlay&&o.push(this.engagementOverlayView.initialize().then((function(){return t.engagementOverlayNode.append(t.engagementOverlayView.get("container")),t.engagementOverlayView.normalizedActivate()}))),this.params.showHeader&&o.push(this.headerView.initialize().then((function(){return t.headerNode.append(t.headerView.get("container")),t.headerView.normalizedActivate()}))),this.params.photoConfig.showHeadOverlay&&o.push(this.headerOverlayView.initialize().then((function(){return t.headOverlayViewNode.append(t.headerOverlayView.get("container")),t.headerOverlayView.normalizedActivate()}))),e.Promise.all(o)},bindHoverStateEvents:function(){var t=this,o=this.get("container");this.engagementOverlayView&&(this.registerEventHandler(this.engagementOverlayView.on("menuOpened",(function(){t.toggleActiveHover(!0)}))),this.registerEventHandler(this.engagementOverlayView.on("menuClosed",(function(){t.toggleActiveHover(!1)})))),this.registerEventHandler(e.on("groupMenuOpen",(function(e){e.anchorNode.ancestor(".photo-card-view")===o&&t.toggleActiveHover(!0)}))),this.registerEventHandler(e.on("groupMenuClose",(function(e){e.anchorNode.ancestor(".photo-card-view")===o&&t.toggleActiveHover(!1)}))),this.registerEventHandler(e.on("personMenuOpen",(function(e){e.anchorNode.ancestor(".photo-card-view")===o&&t.toggleActiveHover(!0)}))),this.registerEventHandler(e.on("personMenuClose",(function(e){e.anchorNode.ancestor(".photo-card-view")===o&&t.toggleActiveHover(!1)})))},toggleActiveHover:function(e){this.footOverlayNode&&this.footOverlayNode.toggleClass("active-hover",e),this.headOverlayNode&&this.headOverlayNode.toggleClass("active-hover",e)},renderBatchLayout:function(t){var o=this,i=[],a=this.params.item.photoItems.slice(0,t.boxes.length),s=e.Node.create('<div class="card-batch-layout"></div>'),n=o.params.item.count-a.length;return s.setStyle("position","relative"),s.setStyle("height",t.containerHeight),s.setStyle("width",t.width),a.forEach((function(s,h){var r=n>0&&h===a.length-1,d=o.params.batchConfig.photoConfig,l=o.params.batchConfig.layoutType,p=t.boxes[h];i.push(o.appContext.getView("photo-card-view",{showHeader:!1,isBatchLayout:!1,showLinkFooter:!1,showDetailsFooter:!1,showInfoBar:!1,showInfoBarTitle:!1,showInfoBarViews:!1,box:p,photoConfig:{photoItem:s,box:t.boxes[h],showCountOverlay:r,moreCount:n,showDetailsFooterOverlay:!r&&d.showDetailsFooterOverlay,showInfoBarOverlay:!r&&d.showInfoBarOverlay,showInfoBarTitle:d.showInfoBarTitle,showInfoBarViews:d.showInfoBarViews,shouldContain:d.shouldContain,showHeadOverlay:!r&&d.showHeadOverlay,urlContext:d.urlContext,showPhotoInterstitial:s.needsInterstitial,photoInterstitialContent:s.needsInterstitial?o.templates("adult-content-photo-overlay")({...o.appContext.flipper.isFlipped("enable-nsfw-2024")?e.NSFWHelper.getPhotoCardConfig():{},photoId:s.id,photoUrl:s.url+d.urlContext,isCompact:!!o.appContext.flipper.isFlipped("enable-nsfw-2024")||"large"!==l}):void 0,hasHoverPlay:d.hasHoverPlay,headerConfig:{title:s.owner.displayname,url:"/photos/"+s.owner.pathAlias,iconUrl:s.owner.buddyicon.default,isPersonAttribution:!0,attributionId:s.owner.nsid,isCompact:!0,showMenu:!1,theme:"overlay",showProBadge:s.owner.isPro,proBadgeType:s.owner.proBadgeType}}}).then((function(e){return e.initialize()})))})),e.Promise.all(i).then((function(i){var a=[];return i.forEach((function(i,a){var n=i.params.photoConfig.photoItem.id,h=i.params.photoConfig.photoItem.photoId,r=t.boxes[a],d=i.get("container"),l=e.Node.create('<div class="card-batch-photo-item" data-photo-item-id="'+n+'" data-photo-id="'+h+'"></div>');l.setStyle("position","absolute"),l.setStyle("display","flex"),l.setStyle("flex-direction","column"),l.setStyle("top",r.top),l.setStyle("left",r.left),l.setStyle("width",r.width),l.setStyle("height",r.height),l.appendChild(d),s.appendChild(l),o.cardViews[h]=i,i.params.photoConfig.showCountOverlay&&o.registerEventHandler(i.on("moreButtonClicked",o.handleMoreClick.bind(o)))})),o.cardContentNode.append(s),i.forEach((function(e,t){a.push(e.activate())})),e.Promise.all(a)}))},handleMoreClick:function(){var e,t=this;"large"===t.params.batchConfig.layoutType?e="batchLarge":"medium"===t.params.batchConfig.layoutType?e="batchMedium":"compact"===t.params.batchConfig.layoutType&&(e="batchCompact"),this.fire("batchLayoutMoreClicked",{layoutType:e,itemId:this.params.item.id})},toggleFaded:function(e){this.params.isFaded=!0,this.photoCardNode.toggleClass("faded",e),this.headerView&&this.headerView.toggleFaded(e)},updateBreakpoints:function(){var e=this.get("container").get("clientWidth");this.prevBreakpointWidth!==e&&(this.params.showFooter&&(this.params.showInfoBar&&(this.leftContainerNode.addClass("breakpoint-invisible"),this.infoBarNode.removeClass("breakpoint-narrow"),this.engagementView.toggleCommentNode(!0),this.engagementView.toggleFaveNode(!0),this.params.showInfoBarViews?this.leftContainerNode.get("clientWidth")+this.engagementNode.get("clientWidth")+12>this.infoBarNode.get("clientWidth")-24&&(this.infoBarNode.addClass("breakpoint-narrow"),this.leftContainerNode.addClass("breakpoint-hidden")):this.params.showInfoBarTitle&&this.leftContainerNode.get("clientWidth")<=10&&(this.infoBarNode.addClass("breakpoint-narrow"),this.leftContainerNode.addClass("breakpoint-hidden")),this.infoBarNode.get("clientWidth")-16<this.engagementNode.get("clientWidth")&&(this.engagementView.toggleCommentNode(!1),this.infoBarNode.get("clientWidth")-16<this.engagementNode.get("clientWidth")&&this.engagementView.toggleFaveNode(!1)),this.leftContainerNode.removeClass("breakpoint-invisible")),this.params.showDetailsFooter&&(this.descriptionContentNode.get("clientWidth")<this.descriptionContentNode.get("scrollWidth")?this.detailsNode.addClass("has-more"):this.detailsNode.removeClass("has-more"))),this.params.photoConfig.showFootOverlay&&(this.params.photoConfig.showInfoBarOverlay&&(this.leftContainerOverlayNode.addClass("breakpoint-invisible"),this.infoBarOverlayNode.removeClass("breakpoint-narrow"),this.engagementOverlayView.toggleCommentNode(!0),this.engagementOverlayView.toggleFaveNode(!0),this.params.photoConfig.showInfoBarViews?this.leftContainerOverlayNode.get("clientWidth")+this.engagementOverlayNode.get("clientWidth")+12>this.infoBarOverlayNode.get("clientWidth")-24&&(this.infoBarOverlayNode.addClass("breakpoint-narrow"),this.leftContainerOverlayNode.addClass("breakpoint-hidden")):this.params.photoConfig.showInfoBarTitle&&this.leftContainerOverlayNode.get("clientWidth")<=10&&(this.infoBarOverlayNode.addClass("breakpoint-narrow"),this.leftContainerOverlayNode.addClass("breakpoint-hidden")),this.infoBarOverlayNode.get("clientWidth")-16<this.engagementOverlayNode.get("clientWidth")&&(this.engagementOverlayView.toggleCommentNode(!1),this.infoBarOverlayNode.get("clientWidth")-16<this.engagementOverlayNode.get("clientWidth")&&this.engagementOverlayView.toggleFaveNode(!1)),this.leftContainerOverlayNode.removeClass("breakpoint-invisible")),this.params.photoConfig.showDetailsFooterOverlay&&(this.descriptionContentNode.get("clientWidth")<this.descriptionContentNode.get("scrollWidth")?this.detailsOverlayNode.addClass("has-more"):this.detailsOverlayNode.removeClass("has-more"))),this.params.showHeader&&this.headerView.updateBreakpoints(),this.params.photoConfig.showHeadOverlay&&this.headerOverlayView.updateBreakpoints(),this.prevBreakpointWidth=e)},createVideoPlayer:function(){var t=this,o=(this.params.photoConfig.photoItem.id,this.videoNode),i=(o.getDOMNode(),new e.FlickrVideoPlayer({container:this.photoNode,model:this.params.photoConfig.photoItem.model,appContext:this.appContext,videoNode:o.getDOMNode(),showControls:!1,controlBar:{fullscreenToggle:!1},autoplay:!1,loop:!0,muted:!0}));return this.videoPlayer=i,i.init().catch((function(){t.playButtonNode.addClass("hidden")}))},handleVideoHover:function(){var e=this;this.isVideoHovered=!0,this.playButtonNode.addClass("hidden"),this.videoPlayer?this.videoPlayer.play():this.createVideoPlayer().then((function(){e.videoPlayer.play()}))},handleVideoUnhover:function(){this.isVideoHovered=!1,this.videoPlayer&&(this.videoPlayer.pause(),this.playButtonNode.removeClass("hidden"))},handleBlurWindow:function(){this.videoPlayer&&(this.isVideoHovered=!1,this.videoPlayer.pause(),this.playButtonNode.removeClass("hidden"))},setAwake:function(e){var t,o,i=this.isAwake,a=this.params.photoConfig.photoItem;for(t in this.isAwake=e,this.cardViews)t in this.cardViews&&this.cardViews[t].setAwake(e);this.photoCardNode.toggleClass("awake",e),a&&(a.isVideo&&this.videoNode&&this.videoNode.setAttribute("poster",this.params.photoConfig.displayUrl),!i&&e&&(o=a.photoId,this.viewCounter.queue(o,document.location.href),this.updateBreakpoints()))},toggleExpandedDetails:function(e,t){var o,i=this,a=(this.params.item,e.one(".description-less-button"));this.toggleActiveHover(t),e.toggleClass("expanded",t),t&&a&&(o=this.registerEventHandler(a.on("click",(function(){i.toggleExpandedDetails(e,!1),i.detachRegisteredEvent(o)}))))},pickDisplayUrl:function(){var e=this.params.photoConfig,t=e.box,o=e.photoItem.model.getSizeToFit({width:t?t.width:1e3,height:t?t.height:1e3},{sizes:e.photoItem.sizes,cropToFit:!0});this.params.photoConfig.displayUrl=o.displayUrl},rerender:function(e){this.layoutItem=e,this.isRendering=!0,Object.assign(this.params.photoConfig.photoItem,this.photoCardHelper.convertPhotoModel(this.params.photoConfig.photoItem.model)),this.detachRegisteredEvents(),this.buildContainer(),this.activate()},updateBoxAndPhotoBox:function(e){this.params.box=e,this.params.photoConfig.box={...e,height:this.params.showInfoBar?e.height-this.photoCardHelper.INFO_BAR_HEIGHT:e.height}},destructor:function(){for(var e in this.engagementView&&this.engagementView.destroy({remove:!0}),this.engagementOverlayView&&this.engagementOverlayView.destroy({remove:!0}),this.headerView&&this.headerView.destroy({remove:!0}),this.headerOverlayView&&this.headerOverlayView.destroy({remove:!0}),this.cardViews)this.cardViews[e].destroy({remove:!0})},updateGeometry:function(e){this.isRendering?this.queuedRerenderLayout=e:this.rerender(e)},updateNodeGeometry:function(e,t){this.updateBoxAndPhotoBox(e.geometry),t.setStyles({position:"absolute",width:e.geometry.width+"px",height:e.geometry.height+"px",transform:`translate(${e.geometry.left}px, ${e.geometry.top}px)`})},setInitialGeometry:function(e){e?this.layoutItem=e:e=this.layoutItem,this.updateNodeGeometry(e,this.get("container"))}})}),"@VERSION@",{requires:["flickr-view","photo-card-header-view","hermes-template-photo-card","hermes-template-photo-card-engagement","hermes-template-adult-content-photo-overlay","hermes-template-photo-card-overlay-icon","hermes-template-photo-card-description-tooltip","photo-card-helper","flickr-video-player","nsfw-helper"],optionalRequires:["hermes-core"],langBundles:["common","relative-dates","feed","feed-new","adult-content-overlay","profile"]});