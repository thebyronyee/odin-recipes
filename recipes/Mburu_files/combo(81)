YUI.add("hermes-template-sub-photo",(function(t,e){var n=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,n,l,o){var a=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,s=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="sub-photo-container centered-content">\n\t<div class="sub-photo-content-container">\n\t\t'+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-left-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:3,column:2},end:{line:3,column:32}}}))+"\n\t\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-right-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:4,column:2},end:{line:4,column:33}}}))+"\n\t</div>\n\n\t\n\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-keyboard-shortcuts-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:8,column:1},end:{line:8,column:45}}}))+"\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(l[e]=n)})),t.Template.register("hermes/sub-photo",(function(e,o){return(o=o||{}).partials=o.partials?t.merge(l,o.partials):l,n(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-left",(function(e,l){var t=e.Template.Handlebars.revive({1:function(e,l,t,n,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(t,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"comment-count-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:5,column:1},end:{line:5,column:30}}}))+"\n"},3:function(e,l,t,n,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(t,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-liked-by-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:9,column:1},end:{line:9,column:35}}}))+"\n"},5:function(e,l,t,n,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(t,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-fave-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:11,column:1},end:{line:11,column:31}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,l,t,n,o){var a,u=null!=l?l:e.nullContext||{},r=e.hooks.helperMissing,i=e.escapeExpression,s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"attribution-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:1,column:0},end:{line:1,column:27}}}))+"\n"+i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"sub-photo-title-desc-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:36}}}))+"\n"+i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"sub-photo-submoola-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:3,column:0},end:{line:3,column:34}}}))+"\n"+(null!=(a=s(t,"if").call(u,null!=l?s(l,"shouldSeeSidebar"):l,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:7}}}))?a:"")+i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"gift-pro-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:7,column:0},end:{line:7,column:24}}}))+"\n"+(null!=(a=(s(t,"isFlipped")||l&&s(l,"isFlipped")||r).call(u,"enable-likes",{name:"isFlipped",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:8,column:0},end:{line:12,column:14}}}))?a:"")+'\n<div class="photo-comments-container"></div>\n'},useData:!0}),n={};e.Array.each([],(function(l){var t=e.Template.get("hermes/"+l);t&&(n[l]=t)})),e.Template.register("hermes/sub-photo-left",(function(l,o){return(o=o||{}).partials=o.partials?e.merge(n,o.partials):n,t(l,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-submoola",(function(e,a){var t=e.Template.Handlebars.revive({1:function(e,a,t,r,o){var n,l=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="photo-page-m-container">\n'+(null!=(n=e.invokePartial(l(r,"prbd-moola-position"),a,{name:"prbd-moola-position",hash:{upgradeProLink:null!=a?l(a,"upgradeProLink"):a,advertisingStitching:null!=a?l(a,"advertisingStitching"):a,upsellFallback:!1,adUnit:null!=a?l(a,"adUnit"):a},data:o,indent:"\t",helpers:t,partials:r,decorators:e.decorators}))?n:"")+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,a,t,r,o){var n,l=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return null!=(n=l(t,"if").call(null!=a?a:e.nullContext||{},null!=a?l(a,"showPhotoPageAd"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?n:""},usePartial:!0,useData:!0}),r={};e.Array.each(["prbd-moola-position"],(function(a){var t=e.Template.get("hermes/"+a);t&&(r[a]=t)})),e.Template.register("hermes/sub-photo-submoola",(function(a,o){return(o=o||{}).partials=o.partials?e.merge(r,o.partials):r,t(a,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position"]});YUI.add("sub-photo-submoola-view",(function(t){var i=new t.SubscriptionsHelper;t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){return this.nsid=i.nsid,this.photoId=i.photoId,this.isOwner=i.isOwner,this.showPhotoPageAd=!0,this.ad=t.config.flickr.moola.positions.photopage[2],this.adSlots=[],""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this;return this.appContext.getModel("photo-models",t.photoId).then(function(i){t.set("photo",i),this.appContext.adManager.canShowAdWithPhoto(t.get("photo"))||(this.showPhotoPageAd=!1)}.bind(this))},buildContainer:function(){var e=this.appContext.viewportData.getWidth(),o=t.config.flickr.moola.ad_breakpoint_mobile_desktop,n={showPhotoPageAd:this.showPhotoPageAd,adUnit:this.ad[e<o?"ad_unit_mobile":"ad_unit_desktop"],advertisingStitching:this.adEventStitch,upgradeProLink:i.getProLandingPageUrl(i.UTM_HIDE_ADS)};return this.adUnit=n.adUnit,this.adEventStitch=this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(this.get("container"))),this.setContainerWithTemplate("sub-photo-submoola",n),this},activate:function(){return this.showPhotoPageAd&&(this.appContext.adManager.processAdsOnPage(),this.appContext.adManager.signalAdRequest(this)),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-submoola","url-helper","subscriptions-helper"],langBundles:["common"]});YUI.add("attribution-view",(function(e){var i=new e.SubscriptionsHelper;e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.hideFollowView}}},initializer:function(e){return this.nsid=e.nsid,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.realFullscreen=!!e.realFullscreen,this.hideFollowView=!!e.hideFollowView&&e.hideFollowView,this.isAlbumView=e.isAlbumView,this.parentViewName=e.parentViewName||!1,this},loadState:function(){var e=this;return this.appContext.getModel("person-models",this.nsid).then((function(i){e.set("owner",i)}))},buildContainer:function(){var e,t=this.get("owner"),n=this.get("container"),a=t.getValue("pathAlias")||t.getValue("nsid");return"justified"===this.albumPhotoListLayoutStyle&&n.addClass("justified-album-details-page"),e=t.getValue("buddyicon").large?t.getValue("buddyicon").large:t.getValue("buddyicon").default,this.setContainerWithTemplate("attribution",{isPro:t.getValue("isPro"),proBadge:t.getValue("proBadge"),pathAlias:a,buddyicon:e,nsid:t.getValue("nsid"),displayname:t.getValue("displayname"),username:t.getValue("username"),parentViewName:this.parentViewName,realFullscreenEnabled:this.realFullscreen&&this.appContext.experiments.fullscreen.getMode(),isAlbumView:this.isAlbumView,upgradeProLink:i.getProLandingPageUrl(i.UTM_PRO_BADGE,{utm_medium:this.name})}),this},activate:function(){return this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-attribution","promise","follow-view","subscriptions-helper"],optional:["person-models"],langBundles:["attribution","common"]});YUI.add("hermes-template-sub-photo-title-desc",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,t,a){var o,i=null!=l?l:n.nullContext||{},r=n.hooks.helperMissing,s=n.escapeExpression,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\n\t<div class="title-desc-block '+(null!=(o=u(e,"if").call(i,null!=l?u(l,"isOwner"):l,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:30},end:{line:3,column:60}}}))?o:"")+" "+(null!=(o=u(e,"unless").call(i,null!=l?u(l,"enableCollapsableTitleAndDescription"):l,{name:"unless",hash:{},fn:n.program(4,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:61},end:{line:3,column:128}}}))?o:"")+'" tabindex="0" aria-label="'+s((u(e,"intlMessage")||l&&u(l,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ENTER_TO_EDIT_TITLE_DESC"},data:a,loc:{start:{line:3,column:155},end:{line:3,column:225}}}))+'">\n'+(null!=(o=u(e,"unless").call(i,null!=l?u(l,"noTitleToDisplay"):l,{name:"unless",hash:{},fn:n.program(6,a,0),inverse:n.noop,data:a,loc:{start:{line:4,column:2},end:{line:15,column:13}}}))?o:"")+"\n"+(null!=(o=u(e,"unless").call(i,null!=l?u(l,"noDescToDisplay"):l,{name:"unless",hash:{},fn:n.program(15,a,0),inverse:n.noop,data:a,loc:{start:{line:17,column:2},end:{line:26,column:13}}}))?o:"")+'\n\t\t<button class="'+(null!=(o=u(e,"if").call(i,null!=l?u(l,"isMobile"):l,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:28,column:17},end:{line:28,column:54}}}))?o:"")+'ui-button ui-button-cta done-editing-title-desc" data-action="saveTitleDescEdit">'+s((u(e,"intlMessage")||l&&u(l,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"common.DONE"},data:a,loc:{start:{line:28,column:135},end:{line:28,column:173}}}))+"</button>\n\n\t</div>\n\n"+(null!=(o=u(e,"if").call(i,null!=l?u(l,"enableCollapsableTitleAndDescription"):l,{name:"if",hash:{},fn:n.program(18,a,0),inverse:n.noop,data:a,loc:{start:{line:32,column:1},end:{line:36,column:8}}}))?o:"")+"\n"},2:function(n,l,e,t,a){return"editable"},4:function(n,l,e,t,a){return"showFull"},6:function(n,l,e,t,a){var o,i=null!=l?l:n.nullContext||{},r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<h1 class="'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"isOwner"):l,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.noop,data:a,loc:{start:{line:5,column:14},end:{line:5,column:44}}}))?o:"")+" meta-field photo-title "+(null!=(o=r(e,"if").call(i,null!=(o=null!=l?r(l,"empty"):l)?r(o,"title"):o,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.noop,data:a,loc:{start:{line:5,column:68},end:{line:5,column:110}}}))?o:"")+'">\n'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"title"):l,{name:"if",hash:{},fn:n.program(9,a,0),inverse:n.noop,data:a,loc:{start:{line:6,column:4},end:{line:8,column:11}}}))?o:"")+"\t\t\t</h1>\n\t\t\t\t"+(null!=(o=r(e,"if").call(i,null!=l?r(l,"isOwner"):l,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:10,column:4},end:{line:10,column:156}}}))?o:"")+'\n\n\t\t\t<input type="text" class="'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"isMobile"):l,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:29},end:{line:12,column:66}}}))?o:"")+'meta-field edit-meta-field edit-photo-title" wrap="on"></input>\n\t\t\t<input type="text" class="'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"isMobile"):l,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:13,column:29},end:{line:13,column:66}}}))?o:"")+'meta-field edit-meta-field false-textarea false-edit-photo-title" wrap="on" tabindex="-1" aria-hidden="true"></input>\n\n'},7:function(n,l,e,t,a){return"placeholder-text"},9:function(n,l,e,t,a){var o,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t\t"+n.escapeExpression("function"==typeof(o=null!=(o=i(e,"title")||(null!=l?i(l,"title"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"title",hash:{},data:a,loc:{start:{line:7,column:5},end:{line:7,column:14}}}):o)+"\n"},11:function(n,l,e,t,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<a href="#" class="title-desc-edit ui-icon-title-desc-edit" data-action="edit" title="'+n.escapeExpression((o(e,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.EDIT"},data:a,loc:{start:{line:10,column:105},end:{line:10,column:143}}}))+'"></a>'},13:function(n,l,e,t,a){return"hide-editable "},15:function(n,l,e,t,a){var o,i=null!=l?l:n.nullContext||{},r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<h2 class="'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"isOwner"):l,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.noop,data:a,loc:{start:{line:18,column:14},end:{line:18,column:44}}}))?o:"")+" meta-field photo-desc "+(null!=(o=r(e,"if").call(i,null!=(o=null!=l?r(l,"empty"):l)?r(o,"desc"):o,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.noop,data:a,loc:{start:{line:18,column:67},end:{line:18,column:108}}}))?o:"")+'">\n'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"description"):l,{name:"if",hash:{},fn:n.program(16,a,0),inverse:n.noop,data:a,loc:{start:{line:19,column:4},end:{line:21,column:11}}}))?o:"")+'\t\t\t</h2>\n\n\t\t\t<textarea class="'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"isMobile"):l,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:24,column:20},end:{line:24,column:57}}}))?o:"")+'meta-field edit-meta-field edit-photo-desc" wrap="on"></textarea>\n\t\t\t<textarea class="'+(null!=(o=r(e,"if").call(i,null!=l?r(l,"isMobile"):l,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:25,column:20},end:{line:25,column:57}}}))?o:"")+'meta-field edit-meta-field false-textarea false-edit-photo-desc" wrap="on" tabindex="-1" aria-hidden="true"></textarea>\n'},16:function(n,l,e,t,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t\t"+n.escapeExpression((o(e,"photoDescription")||l&&o(l,"photoDescription")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?o(l,"description"):l,0,null!=l?o(l,"isFlickrOnFlickr"):l,{name:"photoDescription",hash:{},data:a,loc:{start:{line:20,column:5},end:{line:20,column:56}}}))+"\n"},18:function(n,l,e,t,a){var o,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t"+(null!=(o=i(e,"unless").call(null!=l?l:n.nullContext||{},null!=(o=null!=l?i(l,"empty"):l)?i(o,"desc"):o,{name:"unless",hash:{},fn:n.program(19,a,0),inverse:n.noop,data:a,loc:{start:{line:33,column:2},end:{line:35,column:13}}}))?o:"")},19:function(n,l,e,t,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'">\n\t\t\t<span class="title-desc-more-button">'+n.escapeExpression((o(e,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.MORE"},data:a,loc:{start:{line:34,column:40},end:{line:34,column:78}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,e,t,a){var o,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=i(e,"unless").call(null!=l?l:n.nullContext||{},null!=l?i(l,"noContentToDisplay"):l,{name:"unless",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:0},end:{line:38,column:11}}}))?o:""},useData:!0}),t={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(t[l]=e)})),n.Template.register("hermes/sub-photo-title-desc",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,e(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-editing-shim",(function(e,a){var i=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,a,i,r,t){return'<div class="editing-shim">&nbsp;</div>'},useData:!0}),r={};e.Array.each([],(function(a){var i=e.Template.get("hermes/"+a);i&&(r[a]=i)})),e.Template.register("hermes/editing-shim",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(r,t.partials):r,i(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});